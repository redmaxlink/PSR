<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>PSR</title>
    <style>


      .b {border: 1px solid red;}

      .flex-row{
        display: flex;
        flex-direction: row;
        justify-content: space-around;
      }
      .flex-column{
        display: flex;
        flex-direction: column;
        justify-content: space-around;
      }

      ::placeholder{
        color: grey;
        opacity: 0.2;
      }

      input { border: 1px solid lightgrey; border-radius: 20px;}

      table {
        width: 100%;
        border: 1px solid black;
        border-collapse: collapse;
      }

      th, td {
        border: 1px solid black;
        border-collapse: collapse;
        text-align: center;
      }

    </style>
  </head>
  <body>

    <div class="flex-column" id="basic" style="margin-top: 40px; height:36vh;">

      <div class="flex-row" style="font-size:40px; width:100%; margin-top: 1%; text-align: center;">
        <input type="text" id="number_in" required style="font-size:40px; text-transform:uppercase; text-align: center;" placeholder="FLIGHT NUMBER">
      </div>

      <div class="flex-row" style="margin-top: 20px;">
        <select id="registeration_in" style="font-size:40px; width:25%;">
            <option value="" selected="selected"></option>
            <option value="VT-ALF">VT-ALF</option>
            <option value="VT-ALG">VT-ALG</option>
            <option value="VT-ALH">VT-ALH</option>
            <option value="VT-ALJ">VT-ALJ</option>
            <option value="VT-ALK">VT-ALK</option>
            <option value="VT-ALL">VT-ALL</option>
            <option value="VT-ALM">VT-ALM</option>
            <option value="VT-ALN">VT-ALN</option>
            <option value="VT-ALO">VT-ALO</option>
            <option value="VT-ALP">VT-ALP</option>
            <option value="VT-ALQ">VT-ALQ</option>
            <option value="VT-ALR">VT-ALR</option>
            <option value="VT-ALS">VT-ALS</option>
            <option value="VT-ALT">VT-ALT</option>
            <option value="VT-ALU">VT-ALU</option>
            <option value="VT-ALX">VT-ALX</option>
        </select>
      </div>

      <div class="flex-row" style="position:relative; margin-top: 20px; width:100%;">
        <div class="flex-column" style="width:40vw; height:100px; text-align:center;">
          <input type="text" id="departure_in" required style="font-size:40px; text-transform:uppercase; text-align: center; display: block;"  placeholder="DEPARTURE">
          <input type="datetime-local" id="departureSked_in"  value="2022-09-08T16:15:00.000" style="font-size:20px; color: grey; text-align: center; display: block;">
        </div>
        <div class="">
          <input type="time" id="crt_in" required style="font-size: 40px; text-transform:uppercase; text-align: center;" placeholder="CRT">
        </div>
        <div class="flex-column" style="width:40vw; height:100px;">
          <input type="text" id="destination_in" required style="font-size:40px; text-transform:uppercase; text-align: center; display: block;" placeholder="DESTINATION">
          <input type="datetime-local" id="destinationSked_in"  value="2022-09-09T06:45:00.000" style="font-size:20px; color: grey; text-align: center; display: block;">
        </div>
      </div>

      <div class="flex-row">
        <input type="text" id="fuelQt_in" required style="font-size: 24px; text-transform:uppercase; text-align: center;">
        <select id="fuelUt_in">
          <option value="LT">LT</option>
          <option value="USG">USG</option>
        </select>
        <input type="text" id="fuelSp_in" required style="font-size: 24px; text-transform:uppercase; text-align: center;">
        <input type="text" id="fuelTp_in" required style="font-size: 24px; text-transform:uppercase; text-align: center;">
      </div>

    </div>


    <div class="" style="width:100%;">


      <div class="flex-row" style="">
        <div class="" style="text-align:center;" onclick="display()">
          <h3>CREW</h3>
        </div>
        <div class="" style="text-align:center;" onclick="display()">
          <h3>TIMING</h3>
        </div>
      </div>

      <div class="" id="crew" style="width:100%; height: 45vh; display: block;">

      </br></br></br></br></br></br>

            <div class="flex-row">

              <div class="" style="width:80%">

                <input type="text" id="1name_in" required style="font-size:14px; text-transform:uppercase; text-align: left;">
                <input type="text" id="1staff_in" required style="font-size:14px; text-transform:uppercase; text-align: center;">
                <input type="text" id="1sap_in" required style="font-size:14px; text-transform:uppercase; text-align: center;">
                <input type="text" id="1ipltm_in" required style="font-size:14px; text-transform:uppercase; text-align: center;">
                <select id="1status_in" style="font-size:14px; ">
                  <option value=" "> </option>
                  <option value="PIC RC">PIC RC</option>
                  <option value="PC PF">RC PF</option>
                  <option value="RC PM">RC PM</option>
                  <option value="SLF">SLF</option>
                  <option value="SUT">SUT</option>
                  <option value="SNY">SNY</option>
                </select>
                <span class="false" id="1takeoffland_in" onclick="takeoffland(this)" style="margin-left: 20px; color: lightgrey;"><< TAKEOFF & LANDING PILOT</span>

                </br></br>

                <input type="text" id="2name_in" required style="font-size:14px; text-transform:uppercase; text-align: left;">
                <input type="text" id="2staff_in" required style="font-size:14px; text-transform:uppercase; text-align: center;">
                <input type="text" id="2sap_in" required style="font-size:14px; text-transform:uppercase; text-align: center;">
                <input type="text" id="2ipltm_in" required style="font-size:14px; text-transform:uppercase; text-align: center;">
                <select id="2status_in" style="font-size:14px; ">
                  <option value=" "> </option>
                  <option value="PIC RC">PIC RC</option>
                  <option value="PC PF">RC PF</option>
                  <option value="RC PM">RC PM</option>
                  <option value="SLF">SLF</option>
                  <option value="SUT">SUT</option>
                  <option value="SNY">SNY</option>
                </select>
                <span class="false" id="2takeoffland_in" onclick="takeoffland(this)" style="margin-left: 20px; color: lightgrey;"><< TAKEOFF & LANDING PILOT</span>


                </br></br>

                <input type="text" id="3name_in" required style="font-size:14px; text-transform:uppercase; text-align: left;">
                <input type="text" id="3staff_in" required style="font-size:14px; text-transform:uppercase; text-align: center;">
                <input type="text" id="3sap_in" required style="font-size:14px; text-transform:uppercase; text-align: center;">
                <input type="text" id="3ipltm_in" required style="font-size:14px; text-transform:uppercase; text-align: center;">
                <select id="3status_in" style="font-size:14px; ">
                  <option value=" "> </option>
                  <option value="PIC RC">PIC RC</option>
                  <option value="PC PF">RC PF</option>
                  <option value="RC PM">RC PM</option>
                  <option value="SLF">SLF</option>
                  <option value="SUT">SUT</option>
                  <option value="SNY">SNY</option>
                </select>
                <span class="false" id="3takeoffland_in" onclick="takeoffland(this)" style="margin-left: 20px; color: lightgrey;"><< TAKEOFF & LANDING PILOT</span>


                </br></br>

                <input type="text" id="4name_in" required style="font-size:14px; text-transform:uppercase; text-align: left;">
                <input type="text" id="4staff_in" required style="font-size:14px; text-transform:uppercase; text-align: center;">
                <input type="text" id="4sap_in" required style="font-size:14px; text-transform:uppercase; text-align: center;">
                <input type="text" id="4ipltm_in" required style="font-size:14px; text-transform:uppercase; text-align: center;">
                <select id="4status_in" style="font-size:14px; ">
                  <option value=" "> </option>
                  <option value="PIC RC">PIC RC</option>
                  <option value="PC PF">RC PF</option>
                  <option value="RC PM">RC PM</option>
                  <option value="SLF">SLF</option>
                  <option value="SUT">SUT</option>
                  <option value="SNY">SNY</option>
                </select>
                <span class="false" id="4takeoffland_in" onclick="takeoffland(this)" style="margin-left: 20px; color: lightgrey;"><< TAKEOFF & LANDING PILOT</span>

                <div class="FIRST" id="half_in" style="margin:2% 0 0 77%; color: grey; display: none;" onclick="half(this)">SITING FIRST HALF</div>

              </div>

              <div class="flex-column" style="width:15%">

                <div class="" style="margin-top:0px;">TakeOff</div>
                <input type="text" id="departurePf_in" required style="font-size: 16px; text-transform:uppercase; text-align: center;" placeholder="1L">

                <div class="" style="margin-top:40px;">Landing</div>
                <input type="text" id="destinationPf_in" required style="font-size: 16px; text-transform:uppercase; text-align: center;" placeholder="1l">
              </div>

            </div>

      </div>

      <div class="" id="time" style="width:100%;  height: 45vh; text-align:center; display: none;">

        <div class="" style="position: absolute; left: 0; width:18%; height: 400px;">

          <div class="" style="text-align: center; margin-top: 320px;">
            <input type="datetime-local" id="departureActual_in" style="font-size:20px;" value="2022-09-08T16:17:00.000" oninput="init()">
            </br></br></br>
            <div class="" style="display:none;">
              <select id="departureDelay_in" style="font-size:20px;">
                  <option value="STN">STN</option>
                  <option value="ATC" selected="selected">ATC</option>
                  <option value="WX WIND">WX WIND</option>
              </select>
              <output></output>
            </div>
          </div>

        </div>

        <div class="" style="position: absolute; right: 0; width:18%; height: 400px;">

          <div class="" style="text-align: center; margin-top: 320px;">
            <input type="datetime-local" id="destinationActual_in" style="font-size:20px;" value="2022-09-09T05:48:00.000" oninput="init()">
            </br></br></br>
            <div class="" style="display:none;">
              <select id="destinationDelay_in" style="font-size:20px;">
                  <option value="WX WIND" selected="selected">WX WIND</option>
                  <option value="ATC">ATC</option>
                  <option value="STN">STN</option>
              </select>
              <output></output>
            </div>
          </div>
        </div>


        <div class="NIGHT" id="light" style="margin-left: -50px; position:absolute;" onclick="lightchange()">
          <img class="" style="object-fit:fill; height:100px;" src="moon.png">
          <output class="" style="display:block; text-align: center;"></output>
        </div>

        </br></br></br></br>
        </br></br></br></br>

        <div class="" id="line1" style="position:absolute;">
          <output class="" style="display: block; margin-left:-50px; text-align: center;"></output>
          <svg class = "" width="4" height="187">
            <rect class = "line" width="8" height="187" style="fill:grey;" />
          </svg>
        </div>

        <div class="" id="line2" style="position:absolute;">
          <output class="" style="display: block; text-align: center;"></output>
          <svg class = "" width="4" height="187">
            <rect class = "line" width="8" height="187" style="fill:grey;" />
          </svg>
        </div>

        </br></br></br></br>
        </br></br></br></br>

        <div class="" id="base" style="position: absolute; left: 20%; width: 60%; height: 50px; border-radius: 25px; border: 2px solid grey;"></div>

        </br></br></br></br>

        <div class="" style="text-align: center;">
          <input class="" id="instrumentflying" type="range" value="30" min="0" max="360" step="10" style="width: 60%;" oninput="this.nextElementSibling.value = this.value">
          <output>30</output>
        </div>

      </div>


    </div>


    <div class="flex-row">
      <input type="button" value="AUTO PSR" onclick="psr_generate()" style="font-size:60px;">
    </div>


    <div id = "table" style="font-family: Arial; position: relative; display: none;">

      <img class="" style="position:absolute; height:36px; margin-top: -8px;object-fit:fill;" src="logo.png">

      <table id="0table" style="height:8mm; border: none;">
        <tr>
          <th style="width:18%; border: none;"></th>
          <th style="width:18%; border: none;"></th>
          <th style="border: none;">PILOTS REPORT</th>
          <td id="number_out" style="width:12%; border: none;"></td>
          <td id="registeration_out" style="width:12%; border: none;"></td>
          <td id="type_out" style="width:12%; border: none;"></td>
        </tr>
      </table>

      <table id="1table" style="height:10mm;">
        <tr style="height:6mm; font-size: 11px;">
          <td style="width: 24.6%; font-size: 14px;" rowspan="2">OPERATING CREW</td>
          <td style="width: 9.2%;">STAFF NO.</br>(Suffix AT / IT)</td>
          <td style="width: 4.4%;" rowspan="2">TRG</br>STS*</td>
          <td style="width: 6.4%;" rowspan="2">CRT</br>(UTC)</br>HH:MM</td>
          <td style="width: 6.4%;" colspan="2">SECTOR(S) OPTG</br>(4 letter ICAO)</td>
          <td style="width: 6.8%; font-size: 16px;" colspan="6">MULTIPLE CREW LOG - ON CONTROLS TIMING</td>
        </tr>
        <tr style="height:4mm; font-size: 10px;">
          <td style="width: 9.2%;">SAP NO.</td>


          <td style="width: 6.4%;">FROM</td>
          <td style="width: 6.4%;">TO</td>
          <td style="width: 6.8%;">FROM</td>
          <td style="width: 6.8%;">TO</td>
          <td style="width: 6.8%;">FROM</td>
          <td style="width: 6.8%;">TO</td>
          <td style="width: 6.8%;">FROM</td>
          <td style="width: 6.8%;">TO</td>
        </tr>
      </table>

      <table id="2table" style="height:85mm; font-size: 12px;">

        <tr style="height:5.5mm; font-size: 12px;">
          <td style="width: 4.6%;" rowspan="2">1.</br>CDR</td>
          <td id="1name_out" style="width: 20%;" rowspan="2"></td>
          <td id="1staff_out"style="width: 9.2%; border-bottom: none;" rowspan="2"></td>
          <td id="1status_out"style="width: 4.4%;" rowspan="3"></td>
          <td id="1crt_out" style="width: 6.4%;" rowspan="3"></td>
          <td style="width: 6.4%;" rowspan="3"></td>
          <td style="width: 6.4%;" rowspan="3"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
        </tr>
        <tr style="height:5.5mm; font-size: 12px;">
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
        </tr>
        <tr style="height:5.5mm; font-size: 12px;">
          <td style="width: 4.6%;">IPLTM</td>
          <td id="1ipltm_out" style="width: 20%;"></td>
          <td id="1sap_out"style="width: 9.2%; border-top: none;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
        </tr>

        <tr style="height:5.5mm; font-size: 12px;">
          <td style="width: 4.6%;" rowspan="2">2.</br>CDR</td>
          <td id="2name_out" style="width: 20%;" rowspan="2"></td>
          <td id="2staff_out"style="width: 9.2%; border-bottom: none;" rowspan="2"></td>
          <td id="2status_out"style="width: 4.4%;" rowspan="3"></td>
          <td id="2crt_out" style="width: 6.4%;" rowspan="3"></td>
          <td style="width: 6.4%;" rowspan="3"></td>
          <td style="width: 6.4%;" rowspan="3"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
        </tr>
        <tr style="height:5.5mm; font-size: 12px;">
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
        </tr>
        <tr style="height:5.5mm; font-size: 12px;">
          <td style="width: 4.6%;">IPLTM</td>
          <td id="2ipltm_out" style="width: 20%;"></td>
          <td id="2sap_out"style="width: 9.2%; border-top: none;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
        </tr>

        <tr style="height:5.5mm; font-size: 12px;">
          <td style="width: 4.6%;" rowspan="2">3.</br>CDR</td>
          <td id="3name_out" style="width: 20%;" rowspan="2"></td>
          <td id="3staff_out"style="width: 9.2%; border-bottom: none;" rowspan="2"></td>
          <td id="3status_out"style="width: 4.4%;" rowspan="3"></td>
          <td id="3crt_out" style="width: 6.4%;" rowspan="3"></td>
          <td style="width: 6.4%;" rowspan="3"></td>
          <td style="width: 6.4%;" rowspan="3"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
        </tr>
        <tr style="height:5.5mm; font-size: 12px;">
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
        </tr>
        <tr style="height:5.5mm; font-size: 12px;">
          <td style="width: 4.6%;">IPLTM</td>
          <td id="3ipltm_out" style="width: 20%;"></td>
          <td id="3sap_out"style="width: 9.2%; border-top: none;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
        </tr>

        <tr style="height:5.5mm; font-size: 12px;">
          <td style="width: 4.6%;" rowspan="2">4.</br>CDR</td>
          <td id="4name_out" style="width: 20%;" rowspan="2"></td>
          <td id="4staff_out"style="width: 9.2%; border-bottom: none;" rowspan="2"></td>
          <td id="4status_out"style="width: 4.4%;" rowspan="3"></td>
          <td id="4crt_out" style="width: 6.4%;" rowspan="3"></td>
          <td style="width: 6.4%;" rowspan="3"></td>
          <td style="width: 6.4%;" rowspan="3"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
        </tr>
        <tr style="height:5.5mm; font-size: 12px;">
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
        </tr>
        <tr style="height:5.5mm; font-size: 12px;">
          <td style="width: 4.6%;">IPLTM</td>
          <td id="4ipltm_out" style="width: 20%;"></td>
          <td id="4sap_out"style="width: 9.2%; border-top: none;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
        </tr>

        <tr style="height:5.5mm; font-size: 12px;">
          <td style="width: 4.6%;" rowspan="2">5.</br>CDR</td>
          <td id="5name_out" style="width: 20%;" rowspan="2"></td>
          <td id="5staff_out"style="width: 9.2%; border-bottom: none;" rowspan="2"></td>
          <td id="5status_out"style="width: 4.4%;" rowspan="3"></td>
          <td id="5crt_out" style="width: 6.4%;" rowspan="3"></td>
          <td style="width: 6.4%;" rowspan="3"></td>
          <td style="width: 6.4%;" rowspan="3"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
        </tr>
        <tr style="height:5.5mm; font-size: 12px;">
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
        </tr>
        <tr style="height:5.5mm; font-size: 12px;">
          <td style="width: 4.6%;">IPLTM</td>
          <td id="5ipltm_out" style="width: 20%;"></td>
          <td id="5sap_out"style="width: 9.2%; border-top: none;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
          <td style="width: 6.8%;"></td>
        </tr>

      </table>

      <table id="3table" style="margin:2px 0 0 0; height:12mm;">
        <tr style="height:5mm; font-size: 12px;">
          <td style="width: 9.4%; border-bottom: none;" rowspan="2">DATE</br>(UTC)</td>
          <td style="width: 7.2%; border-bottom: none;" rowspan="2">STATION</br>4 letter</td>
          <td style="width: 6%; border-bottom: none;" rowspan="2">SKED</br>(UTC)</td>
          <td style="width: 6%; border-bottom: none;" rowspan="2">ACTUAL</br>(UTC)</td>
          <td style="width: 6%; border-bottom: none;" rowspan="2">TOTAL</br>DELAY</td>
          <td style="width: 6%; border-bottom: none;" rowspan="2">CONSQ</td>
          <td style="width: 6%; border-bottom: none;" rowspan="2">STN</td>
          <td style="width: 6%; border-bottom: none;" rowspan="2">ATC</td>
          <td style="width: 6%; border-bottom: none;" rowspan="2">WX</br>WIND</td>
          <td style="width: 5.6%; border-bottom: none;" rowspan="3">PF</td>
          <td style="width: 6.6%; border-bottom: none;" rowspan="2">TOTAL</br>FLT.TIME</td>
          <td style="width: 6.6%; border-bottom: none;" rowspan="2">NIGHT</br>FLYING</td>
          <td style="width: 6.6%; border-bottom: none;" rowspan="2">INST</br>FLYING</td>
          <td style="width: 8.4%; border-bottom: none;" colspan="3">FUEL UPLIFT</td>
        </tr>
        <tr style="height:4mm; font-size: 10px;">
          <td style="width: 8.4%; border: none;"></td>
          <td style="width: 3.6%; border: none;"></td>
          <td style="width: 4%;">SPGR</td>
        </tr>
        <tr style="height:3mm; font-size: 10px;">
          <td style="width: 9.4%; border-top: none;">DD-MM-YYYY</td>
          <td style="width: 7.2%">ICAO CODE</td>
          <td style="width: 6%">HH:MM</td>
          <td style="width: 6%">HH:MM</td>
          <td style="width: 6%">HH:MM</td>
          <td style="width: 6%">HH:MM</td>
          <td style="width: 6%">HH:MM</td>
          <td style="width: 6%">HH:MM</td>
          <td style="width: 6%">HH:MM</td>
          <td style="width: 6.6%">HH:MM</td>
          <td style="width: 6.6%">HH:MM</td>
          <td style="width: 6.6%">HH:MM</td>
          <td style="width: 8.4%">QUANTITY</td>
          <td style="width: 3.6%">UNIT</td>
          <td style="width: 4%">TEMP</td>
        </tr>
      </table>

      <table id="4table" style="height:42mm; font-size: 18px;">
        <tr style="height:7mm;">
          <td id="departureDate_out" style="width: 9.4%;"></td>
          <td id="departure_out" style="width: 7.2%; border-bottom: none;"></td>
          <td id="departureSked_out" style="width: 6%;"></td>
          <td id="departureActual_out" style="width: 6%;"></td>
          <td id="departureDelay_out" style="width: 6%;"></td>
          <td id="depCONSQ_out" style="width: 6%;"></td>
          <td id="depSTN_out" style="width: 6%;"></td>
          <td id="depATC_out" style="width: 6%;"></td>
          <td id="depWX WIND_out" style="width: 6%;"></td>
          <td id="departurePf_out" style="width: 5.6%;"></td>
          <td id="total_out" style="width: 6.6%;" rowspan="2"></td>
          <td id="night_out" style="width: 6.6%;" rowspan="2"></td>
          <td id="instrumentflying_out" style="width: 6.6%;" rowspan="2"></td>
          <td id="fuelQt_out" style="width: 8.4%;"></td>
          <td id="fuelUt_out" style="width: 3.6%;"></td>
          <td id="fuelSp_out" style="width: 4%;"></td>
        </tr>
        <tr style="height:7mm;">
          <td id="destinationDate_out" style="width: 9.4%;"></td>
          <td id="destination_out" style="width: 7.2%; border-top: none;"></td>
          <td id="destinationSked_out" style="width: 6%;"></td>
          <td id="destinationActual_out"style="width: 6%;"></td>
          <td id="destinationDelay_out" style="width: 6%;"></td>
          <td id="desCONSQ_out" style="width: 6%;"></td>
          <td id="desSTN_out" style="width: 6%;"></td>
          <td id="desATC_out" style="width: 6%;"></td>
          <td id="desWX WIND_out" style="width: 6%;"></td>
          <td id="destinationPf_out" style="width: 5.6%;"></td>



          <td style="width: 8.4%;"></td>
          <td style="width: 3.6%;"></td>
          <td id="fuelTp_out" style="width: 4%;"></td>
        </tr>
        <tr style="height:7mm;">
          <td style="width: 9.4%;"></td>
          <td style="width: 7.2%; border-bottom: none;"></td>
          <td style="width: 6%;"></td>
          <td style="width: 6%;"></td>
          <td style="width: 6%;"></td>
          <td style="width: 6%;"></td>
          <td style="width: 6%;"></td>
          <td style="width: 6%;"></td>
          <td style="width: 6%;"></td>
          <td style="width: 5.6%;"></td>
          <td style="width: 6.6%;"></td>
          <td style="width: 6.6%;"></td>
          <td style="width: 6.6%;"></td>
          <td style="width: 8.4%;"></td>
          <td style="width: 3.6%;"></td>
          <td style="width: 4%;"></td>
        </tr>
        <tr style="height:7mm;">
          <td style="width: 9.4%;"></td>
          <td style="width: 7.2%; border-top: none;"></td>
          <td style="width: 6%;"></td>
          <td style="width: 6%;"></td>
          <td style="width: 6%;"></td>
          <td style="width: 6%;"></td>
          <td style="width: 6%;"></td>
          <td style="width: 6%;"></td>
          <td style="width: 6%;"></td>
          <td style="width: 5.6%;"></td>
          <td style="width: 6.6%;"></td>
          <td style="width: 6.6%;"></td>
          <td style="width: 6.6%;"></td>
          <td style="width: 8.4%;"></td>
          <td style="width: 3.6%;"></td>
          <td style="width: 4%;"></td>
        </tr>
        <tr style="height:7mm;">
          <td style="width: 9.4%;"></td>
          <td style="width: 7.2%; border-bottom: none;"></td>
          <td style="width: 6%;"></td>
          <td style="width: 6%;"></td>
          <td style="width: 6%;"></td>
          <td style="width: 6%;"></td>
          <td style="width: 6%;"></td>
          <td style="width: 6%;"></td>
          <td style="width: 6%;"></td>
          <td style="width: 5.6%;"></td>
          <td style="width: 6.6%;"></td>
          <td style="width: 6.6%;"></td>
          <td style="width: 6.6%;"></td>
          <td style="width: 8.4%;"></td>
          <td style="width: 3.6%;"></td>
          <td style="width: 4%;"></td>
        </tr>
        <tr style="height:7mm;">
          <td style="width: 9.4%;"></td>
          <td style="width: 7.2%; border-top: none;"></td>
          <td style="width: 6%;"></td>
          <td style="width: 6%;"></td>
          <td style="width: 6%;"></td>
          <td style="width: 6%;"></td>
          <td style="width: 6%;"></td>
          <td style="width: 6%;"></td>
          <td style="width: 6%;"></td>
          <td style="width: 5.6%;"></td>
          <td style="width: 6.6%;"></td>
          <td style="width: 6.6%;"></td>
          <td style="width: 6.6%;"></td>
          <td style="width: 8.4%;"></td>
          <td style="width: 3.6%;"></td>
          <td style="width: 4%;"></td>
        </tr>

      </table>

      <table id="5table" style="margin:2px 0 0 0; height:12mm;">
        <tr>
          <td style="font-size: 14px; border: none;  text-align: left;">REMARKS :</td>
        </tr>
        <tr>
          <td style="font-size: 14px; border: none;  text-align: left;">FDTL EXTENSION AVAILED [  ]</td>
        </tr>
      </table>

      <table id="6table" style="height:9mm; border: none;">
        <tr>
          <td style="font-size: 12px; border: none; text-align: left;">NOTE : UNDER PF coloumn enter the Crew Serial Number, Seat Occupied [L/R] and Circle [D/N] for [Day/Night] T.O / Landing.  Tick [] IF FDTL EXTENSION AVAILED.</br>
          * TRG STS = PIC RC, RCPF, RCPM, SLF, SNY, SUT  Important Email ID's : FLIGHT SAFETY : flightsafety.airindia.in CMS : cms.psrupdation@airindia.in</td>
        </tr>
      </table>

    </div>


    <script type="text/javascript">

      //////////////////////////////////////////////////////////////////////////

      var start, end, l1, light, l2, c;
      var depSkd, desSkd, depDly, delay1 = 0, delay2 = 0, desDly;
      var night;
      var time;
      init();

      function init(){


        start = document.getElementById('departureActual_in').valueAsNumber;
        end = document.getElementById('destinationActual_in').valueAsNumber;
        l1 = document.getElementById('line1');
        light = document.getElementById('light');
        l2 = document.getElementById('line2');

        depSkd = document.getElementById('departureSked_in').valueAsNumber;
        desSkd = document.getElementById('destinationSked_in').valueAsNumber;
        depDly = document.getElementById('departureDelay_in');
        desDly = document.getElementById('destinationDelay_in');

        c = 60 / ((end - start)/60000);
        l1.style.left = 20 + 60 * 0.33 + '%';
        l1.firstElementChild.value = get_utc( start + 60000 * (60 * 0.33) / c );
        l2.style.left = 20 + 60 * 0.66 + '%';
        l2.firstElementChild.value = get_utc( start + 60000 * (60 * 0.66)/c );

        light.style.left = 50 + '%';
        calc_night();


        if(start > depSkd){delay1 = start - depSkd}
        else{delay1 = 0};

        if(end - desSkd > delay1){delay2 = end - (desSkd + delay1)}
        else{delay2 = 0};

        if(delay1 > 0){depDly.parentNode.style.display = 'block'; depDly.nextElementSibling.value = get_hhmm(delay1);}
        else{depDly.parentNode.style.display = 'none'};

        if(delay2 > 0){desDly.parentNode.style.display = 'block'; desDly.nextElementSibling.value = get_hhmm(delay2);}
        else{desDly.parentNode.style.display = 'none'};

      };

      //////////////////////////////////////////////////////////////////////////

      l1.addEventListener('touchmove', function(event) {

        var touch = event.targetTouches[0].pageX / window.innerWidth * 100;

        ////

        if(touch <= 20){drag = 20}
        else if( touch >= 80){drag = 80}
        else{drag = touch};

        ////

        l1.style.left = drag + '%';

        this.firstElementChild.value = get_utc( start + 60000 * Math.floor( (drag - 20)/c ) );

        ////

        let diff = value(l2.style.left) - drag;
        calc_night();

        ////

        event.preventDefault();

      }, false);

      ////////////////

      l2.addEventListener('touchmove', function(event) {

        var touch = event.targetTouches[0].pageX / window.innerWidth * 100;

        ////

        let min = value(l1.style.left) + c * 10;
        if(touch <= min){drag = min;}
        else if(touch >= 80){drag = 80}
        else{drag = touch};

        ////

        l2.style.left = drag + '%';
        this.firstElementChild.value = get_utc( start + 60000 * Math.floor( (drag - 20)/c ) );

        ////

        let diff = drag - value(l1.style.left);
        calc_night();

        ////

        event.preventDefault();

      }, false);

      //////////////////////////////////////////////////////////////////////////

      function display(){
         let d = document.getElementById('crew').style.display;
         if(d == 'block'){
           document.getElementById('crew').style.display = 'none';
           document.getElementById('time').style.display = 'block';
         }
         else if(d == 'none'){
           document.getElementById('crew').style.display = 'block';
           document.getElementById('time').style.display = 'none';
         }
      };
      function takeoffland(item){

        if(item.style.color == 'lightgrey'){item.style.color = 'black'}
        else if(item.style.color == 'black'){item.style.color = 'lightgrey'};

        let count = 0;
        for(i=1; i<5; i++){if(document.getElementById(i + 'takeoffland_in').style.color == 'black'){count++}};

        if(count == 0 || count > 2){document.getElementById('half_in').style.display = 'none'}
        else{document.getElementById('half_in').style.display = 'block'};

        if(count > 2){
            for(i=1; i<5; i++){document.getElementById(i + 'takeoffland_in').style.color = 'lightgrey'};
        }

      };
      function half(item){

        if(item.classList[0] == "FIRST"){
          item.innerHTML = "SITING SECOND HALF";
          item.className = "SECOND";
        }
        else if(item.classList[0] == "SECOND"){
          item.innerHTML = 'SITING FIRST HALF';
          item.className = "FIRST";
        };

      };

      function value(data){
        return Number(data.slice(0, data.length - 1));
      };
      function lightchange(){

        if(light.firstElementChild.src.endsWith("sun.png")){
          light.classList = ["NIGHT"];
          light.firstElementChild.src = "moon.png";
        }
        else{
          light.classList = ["DAY"];
          light.firstElementChild.src = "sun.png";
        };

      };
      function calc_night(){
        let l_s = ( start + 60000 * Math.floor( (value(l1.style.left) - 20)/c ) );
        let l_e = ( start + 60000 * Math.floor( (value(l2.style.left) - 20)/c ) );
        light.lastElementChild.value =  get_hhmm(l_e - l_s);
      };

      function get_utc(time){
        time = new Date(time);
        hh = time.getUTCHours();
        hh = ('0'+ hh).slice(-2);
        mm = time.getUTCMinutes();
        mm = ('0'+ mm).slice(-2);
        return hh + ':' + mm;
      };
      function get_hhmm(block){

        block = block / 60000;
        hh = Math.trunc(block / 60);
        hh = ('0'+ hh).slice(-2);
        mm = block % 60;
        mm = ('0'+ mm).slice(-2);
        return hh + ':' + mm;

      };

      //////////////////////////////////////////////////////////////////////////

      function psr_generate(){

        document.getElementById('number_out').innerHTML = 'AIC ' + document.getElementById('number_in').value;
        document.getElementById('registeration_out').innerHTML = document.getElementById('registeration_in').value;
        let lr200 = ['VT-ALF', 'VT-ALG', 'VT-ALH'], type = 'B777-300ER'
        if(lr200.includes(document.getElementById('registeration_in').value)){type = 'B777-200LR'}
        document.getElementById('type_out').innerHTML = type;

        let date = new Date(start);
        document.getElementById('departureDate_out').innerHTML = date.toLocaleDateString();
        date = new Date(end);
        document.getElementById('destinationDate_out').innerHTML = date.toLocaleDateString();

        document.getElementById('departure_out').innerHTML = document.getElementById('departure_in').value.toUpperCase();
        document.getElementById('destination_out').innerHTML = document.getElementById('destination_in').value.toUpperCase();

        document.getElementById('departureSked_out').innerHTML = get_utc(depSkd);
        document.getElementById('destinationSked_out').innerHTML = get_utc(desSkd);

        document.getElementById('departureActual_out').innerHTML = get_utc(start);
        document.getElementById('destinationActual_out').innerHTML = get_utc(end);


        if(depDly.style.display == 'block'){
          document.getElementById('departureDelay_out').innerHTML = depDly.nextElementSibling.value;
          document.getElementById('dep' + depDly.value + '_out').innerHTML = depDly.nextElementSibling.value;
        };

        if(delay1 > 0){
          document.getElementById('departureDelay_out').innerHTML = get_hhmm(delay1);
          document.getElementById('dep' + depDly.value + '_out').innerHTML = get_hhmm(delay1);
        };

        if(end - desSkd > 0){
          document.getElementById('destinationDelay_out').innerHTML = get_hhmm(end - desSkd);
          if(delay1 > 0){document.getElementById('desCONSQ_out').innerHTML = get_hhmm(delay1)};
          if(delay2 > 0){document.getElementById('des' + desDly.value + '_out').innerHTML = get_hhmm(delay2)};
        };

        document.getElementById('departurePf_out').innerHTML = document.getElementById('departurePf_in').value.toUpperCase();
        document.getElementById('destinationPf_out').innerHTML = document.getElementById('destinationPf_in').value.toUpperCase();

        document.getElementById('total_out').innerHTML = get_hhmm(end - start);

        let totalNight = 0;
        if(light.classList[0] == "NIGHT"){totalNight = light.lastElementChild.value}
        else if(light.classList[0] == "DAY"){
          let l_s = ( start + 60000 * Math.floor( (value(l1.style.left) - 20)/c ) );
          let l_e = ( start + 60000 * Math.floor( (value(l2.style.left) - 20)/c ) );
          totalNight = get_hhmm( (l_s - start) + (end - l_e) );
        }
        document.getElementById('night_out').innerHTML = totalNight;

        let inst = document.getElementById('instrumentflying').valueAsNumber * 60000;
        document.getElementById('instrumentflying_out').innerHTML = get_hhmm(inst);

        document.getElementById('fuelQt_out').innerHTML = document.getElementById('fuelQt_in').value;
        document.getElementById('fuelUt_out').innerHTML = document.getElementById('fuelUt_in').value;
        document.getElementById('fuelSp_out').innerHTML = document.getElementById('fuelSp_in').value;
        document.getElementById('fuelTp_out').innerHTML = document.getElementById('fuelTp_in').value;

        document.getElementById('1name_out').innerHTML = document.getElementById('1name_in').value.toUpperCase();
        document.getElementById('1staff_out').innerHTML = document.getElementById('1staff_in').value.toUpperCase();
        document.getElementById('1sap_out').innerHTML = document.getElementById('1sap_in').value.toUpperCase();
        document.getElementById('1ipltm_out').innerHTML = document.getElementById('1ipltm_in').value.toUpperCase();
        document.getElementById('1status_out').innerHTML = document.getElementById('1status_in').value.toUpperCase();
        document.getElementById('1crt_out').innerHTML = document.getElementById('crt_in').value.toUpperCase();
        // document.getElementById('2name_out').innerHTML = document.getElementById('2name_in').value;
        // document.getElementById('2staff_out').innerHTML = document.getElementById('2staff_in').value;
        // document.getElementById('2sap_out').innerHTML = document.getElementById('2sap_in').value;
        // document.getElementById('2ipltm_out').innerHTML = document.getElementById('2ipltm_in').valu1ipltme;
        // document.getElementById('2status_out').innerHTML = document.getElementById('2status_in').value;
        //
        // document.getElementById('3name_out').innerHTML = document.getElementById('3name_in').value;
        // document.getElementById('3staff_out').innerHTML = document.getElementById('3staff_in').value;
        // document.getElementById('3sap_out').innerHTML = document.getElementById('3sap_in').value;
        // document.getElementById('3ipltm_out').innerHTML = document.getElementById('3ipltm_in').valu1ipltme;
        // document.getElementById('3status_out').innerHTML = document.getElementById('3status_in').value;
        //
        // document.getElementById('4name_out').innerHTML = document.getElementById('4name_in').value;
        // document.getElementById('4staff_out').innerHTML = document.getElementById('4staff_in').value;
        // document.getElementById('4sap_out').innerHTML = document.getElementById('4sap_in').value;
        // document.getElementById('4ipltm_out').innerHTML = document.getElementById('4ipltm_in').valu1ipltme;
        // document.getElementById('4status_out').innerHTML = document.getElementById('4status_in').value;



        time = time_generate();

        // var table_data = document.getElementsByTagName('td');
        // for(let i = 0; i < table_data.length; i++){table_data[i].setAttribute("contenteditable", "true")};

        window_generate();

      };

      function time_generate(){

        ////////////////////////////////////////////////////////////////////////

        let one_add = 0, two_add = 0, three_add = 0, four_add = 0, five_add = 0;

        let t = (end - start - 4 * 60000)/60000;
        let tl = (Math.floor(t/2) + t%2) * 60000;
        let cr = Math.floor(t/2) * 60000;

        let add_three = Math.floor(  (tl - ms(6.5))/60000 / 2 ) * 60000;

        if(document.getElementById('half_in').className == 'FIRST'){
          if(tl < ms(6.5)){five_add = ms(1);  three_add = ms(1.5); one_add = tl - ms(2.5);}
          else{ one_add = ms(4); three_add = ms(1.5) + add_three ; five_add = tl - one_add - three_add; }
        }
        else if(document.getElementById('half_in').className == 'SECOND'){
          if(tl < ms(6)){one_add = ms(1); five_add = ms(1); three_add = tl - ms(2); }
          else if(tl > ms(6)){one_add = ms(1); three_add = ms(4); five_add = tl - ms(5);};
        }

        if(cr < ms(6)){four_add = ms(2); two_add = cr - ms(2);}
        else if(cr > ms(6)){two_add = ms(4); four_add = cr - ms(4);};

        function ms(item){
          return item * 60 * 60000;
        };

        ////////////////////

        let ll, ls, le;

        if(light.classList[0] == 'NIGHT'){ll = 'NIGHT'}
        else if(light.classList[0] == 'DAY'){ll = 'DAY'};

        ls = start + 60000 * Math.floor( (value(l1.style.left) - 20) / c );
        if(ls <= start){startLight = ll}
        else if(ls > start){startLight = lc(ll)};
        le = start + 60000 * Math.floor( (value(l2.style.left) - 20) / c );
        if(le < end){endLight = lc(ll)}
        else if(le >= end){endLight = ll};

        function lc(info){
          if(info == 'DAY'){return 'NIGHT'}
          if(info == 'NIGHT'){return 'DAY'}
        };

        ////////////////////

        let instrument = document.getElementById('instrumentflying').valueAsNumber;

        ////////////////////

        // console.log(start, startLight);
        // console.log(ls, ll, le);
        // console.log(end, endLight);
        // console.log(instrument);

        console.log(get_hhmm(one_add), get_hhmm(two_add), get_hhmm(three_add),get_hhmm(four_add),get_hhmm(five_add));

        ////////////////////////////////////////////////////////////////////////

        let lastlight = startLight;

        let one_start = start;
        //let one_add = 3600000;
        let one_end = start + one_add;
        let block1 = {'from': one_start, 'to': one_end};

        let two_start = one_end + 60000;
        //let two_add = 14400000;
        let two_end = two_start + two_add;
        let block2 = {'from': two_start, 'to': two_end};

        let three_start = two_end + 60000;
        //let three_add = 10800000;
        let three_end = three_start + three_add;
        let block3 = {'from': three_start, 'to': three_end};

        let four_start = three_end + 60000;
        // let last_block = end - 60000 - four_start;
        // let block = last_block/60000;
        // let min = block % 60;
        // last_block -= 60000 * (min%2);
        // let four_add = last_block/2;
        let four_end = four_start + four_add;
        let block4 = {'from': four_start, 'to': four_end};

        let five_start = four_end + 60000;
        //let five_add = undefined;
        let five_end = end;
        let block5 = {'from': five_start, 'to': five_end};

        daynight(block1, 1);
        daynight(block2, 2);
        daynight(block3, 3);
        daynight(block4, 4);
        daynight(block5, 5);

        function daynight(block, index){

          let day = 0, night = 0;

          if(le <= block.from || ls >= block.to){
            if(lastlight == 'DAY'){day = diff(block.from, block.to)}
            else if(lastlight == 'NIGHT'){night = diff(block.from, block.to)}
          }
          else if(ls <= block.from && le >= block.to){
            lastlight = ll;
            if(lastlight == 'DAY'){day = diff(block.from, block.to)}
            else if(lastlight == 'NIGHT'){night = diff(block.from, block.to)}
          }
          else if(ls <= block.from && le < block.to){
            lastlight = ll;
            if(lastlight == 'DAY'){day = diff(block.from, le); night = diff(le, block.to)}
            else if(lastlight == 'NIGHT'){night = diff(block.from, le); day = diff(le, block.to)}
          }
          else if(ls > block.from && le >= block.to){
            if(lastlight == 'DAY'){day = diff(block.from, ls); night = diff(ls, block.to)}
            else if(lastlight == 'NIGHT'){night = diff(block.from, ls); day = diff(ls, block.to)}
            lastlight = ll;
          }
          else if(ls > block.from && le < block.to){
            let a = diff(block.from, ls);
            let b = diff(ls, le);
            let c = diff(le, block.to);
            if(lastlight == 'DAY'){day = a + c; night = b; ll = 'DAY';}
            else if(lastlight == 'NIGHT'){night = a + c; day = b; ll = 'NIGHT';}
          }

          function diff(a, b){
            return (b - a);
          };

          block.day = day;
          block.night = night;
          block.block = index;

        };




        let set1 = [block1, block3, block5], day1 = 0;
        let set2 = [block2, block4], day2 = 0;

        set1 = sort_info(set1, 'day', 'high');
        set2 = sort_info(set2, 'day', 'high');
        function sort_info(x, y, z){
          x.sort( compare );
          function compare( a, b ) {
            if ( eval('a.' + y + ' < b.' + y ) ){ return -1 }
            if ( eval('a.' + y + ' > b.' + y ) ){ return 1 }
            return 0;
          }
          if(z == 'low'){return x};
          if(z == 'high'){return x.reverse()};
        };

        let dayset1 = block1.day;
        dayset1 += block3.day;
        dayset1 += block5.day;
        dayset1 = Math.trunc( dayset1 / 300000 ) * 300000;
        let dayset2 = block2.day;
        dayset2 += block4.day;
        dayset2 = Math.trunc( dayset2 / 300000 ) * 300000;

        let half = instrument * 60000 /2;
        let add_inst = 0;
        if(dayset1 <= dayset2){add_inst = dayset1}
        else{add_inst = dayset2}
        if(half < add_inst){add_inst = half};

        console.log(instrument, dayset1/60000, dayset2/60000, add_inst/60000);

        inst_add(set1, add_inst);
        inst_add(set2, add_inst);

        function inst_add(data, info){

          data.forEach((x)=>{

            let avail = Math.trunc( x.day / 300000 ) * 300000, added = 0;

            if(info > avail){added = avail}
            else{added = info};
            x.instrument = added;

            if(info - added <= 0){info = 0}
            else{info -= added};

          });

        };

        let time = [];

        final(block1);
        final(block2);
        final(block3);
        final(block4);
        final(block5);

        function final(block){

          block.from = get_utc(block.from);
          block.to = get_utc(block.to);

          block.day = get_hhmm(block.day);
          block.night = get_hhmm(block.night);

          block.instrument = get_hhmm(block.instrument);

          let b = block.block;
          delete block.block;
          time['block' + b] = block;

          // console.log(block);

        };

        ////////////////////////////////////////////////////////////////////////

        return time;

      };

      function window_generate(){

        var mywindow = window.open('', '', '');
        mywindow.document.write('<!DOCTYPE html><html><head><title>')
        ////////////////

        let date = new Date(start);

        mywindow.document.write(
          //Change to Scheduled ADD DEP DES
          "AI" + document.getElementById("number_in").value + ' ' +
          date.toLocaleDateString() + ' ' +
          document.getElementById("departure_in").value.toUpperCase() + '-' +
          document.getElementById("destination_in").value.toUpperCase()

        );

        ////////////////
        mywindow.document.write('</title></head><body >')
        ////////////////

        let node, clone;

        node = document.head.lastElementChild;
        clone = node.cloneNode(true);
        mywindow.document.head.appendChild(clone);

        node = document.getElementById("table");
        clone = node.cloneNode(true);
        clone.style.display = 'block';
        mywindow.document.body.appendChild(clone);
        

        ////////////////
        mywindow.document.write('</body></html>');
        mywindow.document.close(); // necessary for IE >= 10
        mywindow.focus(); // necessary for IE >= 10*/
      };

    </script>


  </body>
</html>
