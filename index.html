<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <style media="screen">
      .b {border: 1px solid red;}
    </style>
  </head>
  <body>

    <div class="" style="display: none;">
      <input type="datetime-local" id="departureActual" value="2022-09-08T16:17:00.000">
      <input type="datetime-local" id="destinationActual" value="2022-09-09T05:48:00.000">
    </div>

  </br></br></br></br>
  </br></br></br></br>
  </br></br></br></br>
  </br></br></br></br>


    <div class="" id="line1" style="position:absolute;">
      <output class="" style="display: block; text-align: center;"></output>
      <svg class = "" width="8" height="300">
        <rect class = "" width="8" height="300" style="fill:rgb(0,0,255);stroke-width:10; stroke:rgb(0,0,0)" />
      </svg>
    </div>

    <!-- <div class="" id="line2" style="position:absolute;">
      <output class="" style="display: block; text-align: center;"></output>
      <svg width="10" height="300">
        <rect width="10" height="300" style="fill:rgb(0,0,255);stroke-width:10;stroke:rgb(0,0,0)" />
      </svg>
    </div>

    <div class="" id="line3" style="position:absolute;">
      <output class="" style="display: block; text-align: center;"></output>
      <svg width="10" height="300">
        <rect width="10" height="300" style="fill:rgb(0,0,255);stroke-width:10;stroke:rgb(0,0,0)" />
      </svg>
    </div>

    <div class="" id="line4" style="position:absolute;">
      <output class="" style="display: block; text-align: center;"></output>
      <svg width="10" height="300">
        <rect width="10" height="300" style="fill:rgb(0,0,255);stroke-width:10;stroke:rgb(0,0,0)" />
      </svg>
    </div> -->

    </br></br></br></br>
    </br></br></br></br>

    <div class="" style="position: absolute; left: 20%; width: 60%; height: 50px; border-radius: 25px; border: 2px solid grey;">





    <script type="text/javascript">


      let width_start = window.innerWidth * 0.20;
      let width_end = window.innerWidth * 0.80;
      let start = document.getElementById('departureActual').valueAsNumber;
      let end = document.getElementById('destinationActual').valueAsNumber;
      let a = width_end - width_start;
      let b = (end - start)/60000;
      let c = (a / b);

      //////////////////////////////////////////////////////////////////////////

      var line1 = document.getElementById('line1');
      line1.style.left = width_start + 'px';
      line1.firstElementChild.value = get_utc(document.getElementById('departureActual').valueAsNumber);
      inactive(line1);

      line1.addEventListener('touchmove', function(event) {

        var touch = event.targetTouches[0];

        let drag = width_start;
        if(touch.pageX-25 <= width_start){drag = width_start; inactive(this)}
        else if(touch.pageX-25 >= width_end){drag = width_end; inactive(this)}
        else{drag = touch.pageX-25; active(this)};

        line1.style.left = drag + 'px';
        drag = get_utc( start + 60000 * (drag - width_start)/c );
        this.firstElementChild.value = drag;
        event.preventDefault();

      }, false);


      ////MOON 1

      // var line2 = document.getElementById('line2');
      // line2.style.left = window.innerWidth * 0.20 + 'px';
      // line2.childNodes[1].value = window.innerWidth * 0.20;
      //
      // line2.addEventListener('touchmove', function(event) {
      //   var touch = event.targetTouches[0];
      //
      //   // Place element where the finger is
      //   let drag = 100;
      //   if(touch.pageX-25 < window.innerWidth * 0.20){drag = window.innerWidth * 0.20}
      //   else if(touch.pageX-25 > window.innerWidth * 0.80){drag = window.innerWidth * 0.80}
      //   else{drag = touch.pageX-25};
      //
      //   line2.style.left = drag + 'px';
      //   //line2.style.top = touch.pageY-25 + 'px';
      //   //this.childNodes[1].value = touch.pageX;
      //   this.lastElementChild.value = drag;
      //   // let rect = line2.getBoundingClientRect();
      //   // console.log(rect.left);
      //   //document.getElementById('night').innerhtml = touch.pageX;
      //   event.preventDefault();
      // }, false);


      function inactive(data){
        data.firstElementChild.style.opacity = '0';
        data.lastElementChild.style.filter = 'grayscale(100%)';
        data.lastElementChild.style.opacity = '0.1';
        //data.lastElementChild.style.height = 40 + 'px';
      };

      function active(data){
        data.firstElementChild.style.opacity = '1';
        data.lastElementChild.style.filter = 'grayscale(0%)';
        data.lastElementChild.style.opacity = '1';
        //data.lastElementChild.style.height = 50 + 'px';
      };

      function get_utc(time){
        time = new Date(time);
        hh = time.getUTCHours();
        hh = ('0'+ hh).slice(-2);
        mm = time.getUTCMinutes();
        mm = ('0'+ mm).slice(-2);
        return hh + ':' + mm;
      };

      function get_hhmm(block){
        //block = (b - a)/60000;
        block = block / 60000;
        hh = Math.trunc(block / 60);
        hh = ('0'+ hh).slice(-2);
        mm = block % 60;
        mm = ('0'+ mm).slice(-2);
        return hh + ':' + mm;
      };

    </script>


  </body>
</html>
